import {
  listenKeys
} from "./chunk-XG6TQ5WD.js";
import {
  h,
  p
} from "./chunk-45XYMZOK.js";
import "./chunk-AURDONME.js";

// node_modules/@nanostores/preact/index.js
function useStore(store, opts = {}) {
  let [, forceRender] = h({});
  let [valueBeforeEffect] = h(store.get());
  p(() => {
    valueBeforeEffect !== store.get() && forceRender({});
  }, []);
  p(() => {
    let batching, timer, unlisten;
    let rerender = () => {
      if (!batching) {
        batching = 1;
        timer = setTimeout(() => {
          batching = void 0;
          forceRender({});
        });
      }
    };
    if (opts.keys) {
      unlisten = listenKeys(store, opts.keys, rerender);
    } else {
      unlisten = store.listen(rerender);
    }
    return () => {
      unlisten();
      clearTimeout(timer);
    };
  }, [store, "" + opts.keys]);
  return store.get();
}
export {
  useStore
};
//# sourceMappingURL=@nanostores_preact.js.map
