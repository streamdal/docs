{
  "version": 3,
  "sources": ["../../@nanostores/preact/index.js"],
  "sourcesContent": ["import { useState, useEffect } from 'preact/hooks'\nimport { listenKeys } from 'nanostores'\n\nexport function useStore(store, opts = {}) {\n  let [, forceRender] = useState({})\n  let [valueBeforeEffect] = useState(store.get())\n\n  useEffect(() => {\n    valueBeforeEffect !== store.get() && forceRender({})\n  }, [])\n  \n  useEffect(() => {\n    let batching, timer, unlisten\n    let rerender = () => {\n      if (!batching) {\n        batching = 1\n        timer = setTimeout(() => {\n          batching = undefined\n          forceRender({})\n        })\n      }\n    }\n    if (opts.keys) {\n      unlisten = listenKeys(store, opts.keys, rerender)\n    } else {\n      unlisten = store.listen(rerender)\n    }\n    return () => {\n      unlisten()\n      clearTimeout(timer)\n    }\n  }, [store, '' + opts.keys])\n\n  return store.get()\n}\n"],
  "mappings": ";;;;;;;;;;AAGO,SAAS,SAAS,OAAO,OAAO,CAAC,GAAG;AACzC,MAAI,CAAC,EAAE,WAAW,IAAI,EAAS,CAAC,CAAC;AACjC,MAAI,CAAC,iBAAiB,IAAI,EAAS,MAAM,IAAI,CAAC;AAE9C,IAAU,MAAM;AACd,0BAAsB,MAAM,IAAI,KAAK,YAAY,CAAC,CAAC;AAAA,EACrD,GAAG,CAAC,CAAC;AAEL,IAAU,MAAM;AACd,QAAI,UAAU,OAAO;AACrB,QAAI,WAAW,MAAM;AACnB,UAAI,CAAC,UAAU;AACb,mBAAW;AACX,gBAAQ,WAAW,MAAM;AACvB,qBAAW;AACX,sBAAY,CAAC,CAAC;AAAA,QAChB,CAAC;AAAA,MACH;AAAA,IACF;AACA,QAAI,KAAK,MAAM;AACb,iBAAW,WAAW,OAAO,KAAK,MAAM,QAAQ;AAAA,IAClD,OAAO;AACL,iBAAW,MAAM,OAAO,QAAQ;AAAA,IAClC;AACA,WAAO,MAAM;AACX,eAAS;AACT,mBAAa,KAAK;AAAA,IACpB;AAAA,EACF,GAAG,CAAC,OAAO,KAAK,KAAK,IAAI,CAAC;AAE1B,SAAO,MAAM,IAAI;AACnB;",
  "names": []
}
